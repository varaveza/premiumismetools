<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premiumisme</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --very-peri: #5B5C9A; --dark-peri: #3E3F6A; --darker-peri: #2A2B4F; --darkest-peri: #1F2030;
            --accent: #7A6EB7; --light-peri: #898AC8; --text-light: #E8E8F5;
            --shadow-color: rgba(0, 0, 0, 0.3); --highlight-color: rgba(255, 255, 255, 0.1);
            --glass-bg: rgba(42, 43, 79, 0.5);
            --glass-border: rgba(255, 255, 255, 0.15);
            --accent-glass-bg: rgba(154, 155, 217, 0.15); --accent-border: rgba(139, 126, 200, 0.7);
        }
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--darkest-peri) 0%, var(--darker-peri) 50%, var(--dark-peri) 100%);
            min-height: 100vh; color: var(--text-light); overflow-x: hidden;
            display: flex; align-items: center; justify-content: center; padding: 10px;
        }
        .bg-animation { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; }
        .shape {
            position: absolute; background: var(--accent-glass-bg); border-radius: 50%;
            animation: float 10s ease-in-out infinite alternate; filter: blur(8px);
        }
        .shape:nth-child(1) { width: 150px; height: 150px; top: 10%; left: 10%; animation-duration: 12s; }
        .shape:nth-child(2) { width: 100px; height: 100px; top: 30%; right: 15%; animation-duration: 8s; animation-delay: -2s; }
        .shape:nth-child(3) { width: 120px; height: 120px; bottom: 15%; left: 20%; animation-duration: 10s; animation-delay: -4s; }
        @keyframes float {
            0% { transform: translateY(0px) translateX(0px); }
            100% { transform: translateY(-30px) translateX(20px); }
        }

        .container-main {
            max-width: 900px; width: 100%; padding: 10px 25px 20px 25px;
            background: var(--glass-bg); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            border-radius: 25px; border: 1px solid var(--glass-border);
            box-shadow: 0 15px 35px var(--shadow-color);
            animation: fadeInScaleUp 0.8s ease-out forwards; z-index: 1;
        }
        @keyframes fadeInScaleUp { from { opacity: 0; transform: scale(0.95) translateY(20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .form-input {
            background-color: var(--accent-glass-bg) !important;
            border: 1px solid var(--glass-border) !important;
            color: var(--text-light) !important;
            border-radius: 0.75rem !important;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .form-input:focus {
            box-shadow: 0 0 0 2px var(--accent) !important;
            border-color: var(--accent-border) !important;
            outline: none;
        }
        .form-input::placeholder { color: rgba(232, 232, 245, 0.5); }
        input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); }
        .btn {
            padding: 12px 24px; border-radius: 12px; font-weight: bold; text-align: center;
            display: inline-flex; align-items: center; justify-content: center; gap: 8px;
            transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
            position: relative; overflow: hidden; cursor: pointer; border: 1px solid transparent;
        }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.2); }
        .btn-primary { background-color: var(--accent); border-color: var(--accent-border); color: var(--text-light); }
        .btn-primary:hover { background-color: var(--light-peri); }
        .btn-secondary { background-color: var(--dark-peri); border-color: var(--glass-border); color: var(--text-light); }
        .btn-secondary:hover { background-color: var(--very-peri); }
        .btn:disabled {
            background-color: var(--darker-peri); color: rgba(232, 232, 245, 0.4);
            cursor: not-allowed; transform: none; box-shadow: none;
        }
        .ripple {
            position: absolute; border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.3);
            transform: scale(0); animation: ripple-animation 0.6s ease-out;
            pointer-events: none;
        }
        @keyframes ripple-animation { to { transform: scale(4); opacity: 0; } }
        .footer { text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--glass-border); opacity: 0.7; font-size: 13px; }
        .footer p i { color: var(--accent); }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="bg-animation">
        <div class="shape"></div> <div class="shape"></div> <div class="shape"></div>
    </div>

    <main class="container-main">
        <div class="mb-0 mt-0"> 
            <div class="flex flex-col items-center"> 
                
                <div class="mb-0">
                    <img src="../logo.svg" alt="Premiumisme Logo" class="h-20 w-100"> 
                </div>

                <nav class="flex justify-center flex-wrap gap-x-1 gap-y-2"> 
                    <a href="../generator-email/emailcreate.html" class="px-3 py-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg font-medium transition-all">Generator Email</a>
                    <a href="refund-calculator.html" class="px-3 py-2 bg-purple-600 text-white rounded-lg font-medium transition-all hover:bg-purple-700">Refund Calculator</a>
                    <a href="../split-mail/email-splitter.html" class="px-3 py-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg font-medium transition-all">Email Splitter</a>
                    <a href="../remove-duplicate/remove-duplicate.html" class="px-3 py-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg font-medium transition-all">Remove Duplicate</a>
                    <a href="../shortlink/shortlink.html" class="px-3 py-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg font-medium transition-all">Shortlink</a>
                </nav>
            </div>
        </div>
        

        
        <div>
            
            <div id="main-section" class="fade-in">
                <div class="bg-[var(--accent-glass-bg)] border border-[var(--glass-border)] rounded-xl p-6 mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div>
                                <label for="namaProduk" class="block text-sm font-medium text-[var(--text-light)] opacity-80 mb-2">Nama Produk</label>
                                <input type="text" id="namaProduk" placeholder="Contoh: Akun Premium" class="w-full p-3 form-input">
                            </div>
                            <div>
                                <label for="namaCustomer" class="block text-sm font-medium text-[var(--text-light)] opacity-80 mb-2">Username Customer</label>
                                <input type="text" id="namaCustomer" placeholder="Contoh: ardan123" class="w-full p-3 form-input">
                            </div>
                            <div>
                                <label for="hargaProduk" class="block text-sm font-medium text-[var(--text-light)] opacity-80 mb-2">Harga Produk (Rp)</label>
                                <input type="number" id="hargaProduk" placeholder="0" step="0.01" min="0" class="w-full p-3 form-input">
                            </div>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label for="tanggalBeli" class="block text-sm font-medium text-[var(--text-light)] opacity-80 mb-2">Tanggal Pembelian</label>
                                <input type="date" id="tanggalBeli" class="w-full p-3 form-input">
                            </div>
                            <div>
                                <label for="tanggalBermasalah" class="block text-sm font-medium text-[var(--text-light)] opacity-80 mb-2">Tanggal Kendala</label>
                                <input type="date" id="tanggalBermasalah" class="w-full p-3 form-input">
                            </div>
                            <div>
                                <label for="masaAktif" class="block text-sm font-medium text-[var(--text-light)] opacity-80 mb-2">Total Masa Aktif (Hari)</label>
                                <input type="number" id="masaAktif" placeholder="30" min="1" class="w-full p-3 form-input">
                            </div>
                        </div>
                    </div>

                    <button id="calculateButton" class="w-full mt-6 btn btn-primary" onclick="calculateRefund()" disabled>
                        <i class="fas fa-calculator"></i>
                        Hitung Refund
                    </button>
                </div>
            </div>

            
            <div id="result-section" class="hidden fade-in">
                <div class="bg-[var(--accent-glass-bg)] border border-[var(--glass-border)] rounded-xl p-6 mb-6">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-4 gap-4">
                        <h3 class="text-xl font-bold text-white">Hasil Perhitungan Refund</h3>
                        <div class="flex gap-2">
                            <button class="btn btn-secondary" onclick="printDocument()">
                                <i class="fas fa-print"></i> Cetak
                            </button>
                            <button class="btn btn-secondary" onclick="backToInput()">
                                <i class="fas fa-arrow-left"></i> Hitung Lagi
                            </button>
                        </div>
                    </div>
                    <div id="refundResult" class="space-y-4">
                    </div>
                </div>
            </div>
        </div>

        <footer class="footer">
            <p>Made With <i class="fas fa-heart"></i> Premiumisme.</p>
        </footer>
    </main>

    <div id="toast" class="fixed top-5 right-5 text-white px-6 py-3 rounded-xl shadow-lg transform translate-x-[120%] transition-transform duration-500 ease-in-out z-50" style="backdrop-filter: blur(10px);">
        <span id="toastMessage">Berhasil!</span>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const inputs = ['namaProduk', 'namaCustomer', 'hargaProduk', 'tanggalBeli', 'tanggalBermasalah', 'masaAktif'];
            inputs.forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    el.addEventListener('input', validateInputs);
                    el.addEventListener('change', validateInputs);
                }
            });

            const today = new Date().toISOString().split('T')[0];
            document.getElementById('tanggalBermasalah').value = today;
            validateInputs();

            const buttons = document.querySelectorAll('.btn');
            buttons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    const ripple = document.createElement('span');
                    ripple.classList.add('ripple');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height) * 1.6;
                    ripple.style.width = ripple.style.height = size + 'px';
                    ripple.style.left = (e.clientX - rect.left - (size / 2)) + 'px';
                    ripple.style.top = (e.clientY - rect.top - (size / 2)) + 'px';

                    const existingRipple = this.querySelector('.ripple');
                    if (existingRipple) existingRipple.remove();
                    this.appendChild(ripple);
                    ripple.addEventListener('animationend', () => ripple.remove(), { once: true });
                });
            });
        });

        function validateInputs() {
            const values = {
                namaProduk: document.getElementById('namaProduk').value.trim(),
                namaCustomer: document.getElementById('namaCustomer').value.trim(),
                hargaProduk: document.getElementById('hargaProduk').value,
                tanggalBeli: document.getElementById('tanggalBeli').value,
                tanggalBermasalah: document.getElementById('tanggalBermasalah').value,
                masaAktif: document.getElementById('masaAktif').value,
            };
            const calculateButton = document.getElementById('calculateButton');
            const isValid = values.namaProduk && values.namaCustomer && parseFloat(values.hargaProduk) > 0 && values.tanggalBeli && values.tanggalBermasalah && parseInt(values.masaAktif) > 0;
            calculateButton.disabled = !isValid;
        }

        function calculateRefund() {
            const refundData = {
                id: Date.now(),
                namaProduk: document.getElementById('namaProduk').value.trim(),
                namaCustomer: document.getElementById('namaCustomer').value.trim(),
                hargaProduk: parseFloat(document.getElementById('hargaProduk').value),
                tanggalBeli: document.getElementById('tanggalBeli').value,
                tanggalBermasalah: document.getElementById('tanggalBermasalah').value,
                masaAktif: parseInt(document.getElementById('masaAktif').value),
            };

            const buyDate = new Date(refundData.tanggalBeli);
            const problemDate = new Date(refundData.tanggalBermasalah);

            if (problemDate < buyDate) {
                showToast('Tanggal kendala tidak boleh lebih awal dari tanggal pembelian', 'error');
                return;
            }

            const MS_PER_DAY = 1000 * 60 * 60 * 24;
            const rawDaysUsed = Math.floor((problemDate - buyDate) / MS_PER_DAY) + 1;
            refundData.daysUsed = Math.max(0, Math.min(refundData.masaAktif, rawDaysUsed));
            const usageProportion = Math.min(1, Math.max(0, refundData.daysUsed / refundData.masaAktif));
            refundData.usageCost = parseFloat((usageProportion * refundData.hargaProduk).toFixed(2));
            refundData.refundAmount = parseFloat(Math.max(0, refundData.hargaProduk - refundData.usageCost).toFixed(2));
            refundData.timestamp = new Date().toLocaleString('id-ID');

            displayRefundResult(refundData);
            document.getElementById('main-section').classList.add('hidden');
            document.getElementById('result-section').classList.remove('hidden');
            showToast('Refund berhasil dihitung!');
        }

        function displayRefundResult(data) {
            const resultDiv = document.getElementById('refundResult');
            resultDiv.innerHTML = `
                <div class="bg-[var(--darker-peri)] rounded-2xl shadow-2xl border border-[var(--glass-border)] overflow-hidden">
                    <div class="bg-gradient-to-r from-[var(--accent)] to-[var(--very-peri)] p-6 text-white">
                        <div class="flex items-center justify-between">
                            <div><h2 class="text-2xl font-bold">Kalkulasi Refund Produk</h2></div>
                            <div class="text-right">
                                <div class="text-sm opacity-80">No. Refund</div>
                                <div class="font-mono text-lg font-bold">#${data.id.toString().slice(-6)}</div>
                            </div>
                        </div>
                    </div>
                    <div class="p-6 space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div><span class="opacity-70">Nama Produk:</span> <span class="font-semibold">${data.namaProduk.toUpperCase()}</span></div>
                            <div><span class="opacity-70">Customer:</span> <span class="font-semibold">${data.namaCustomer.toUpperCase()}</span></div>
                            <div><span class="opacity-70">Harga Produk:</span> <span class="font-semibold">Rp ${data.hargaProduk.toLocaleString('id-ID')}</span></div>
                            <div><span class="opacity-70">Tanggal Order:</span> <span class="font-semibold">${formatDate(data.tanggalBeli)}</span></div>
                            <div><span class="opacity-70">Tanggal Kendala:</span> <span class="font-semibold">${formatDate(data.tanggalBermasalah)}</span></div>
                            <div><span class="opacity-70">Masa Aktif:</span> <span class="font-semibold">${data.masaAktif} hari</span></div>
                        </div>
                        <div class="bg-[var(--accent-glass-bg)] rounded-xl p-4 border border-[var(--glass-border)]">
                             <h3 class="text-lg font-semibold text-white mb-2">Kalkulasi Penggunaan</h3>
                            <div class="flex justify-between text-sm"><span class="opacity-70">Hari Digunakan:</span> <span class="font-semibold">${data.daysUsed} hari</span></div>
                            <div class="flex justify-between text-sm"><span class="opacity-70">Biaya Penggunaan:</span> <span class="font-semibold">Rp ${data.usageCost.toLocaleString('id-ID', {maximumFractionDigits: 2})}</span></div>
                        </div>
                        <div class="bg-gradient-to-r from-green-600/20 to-emerald-600/20 rounded-xl p-6 border border-green-500/30">
                            <div class="flex items-center justify-between">
                                <h3 class="text-xl font-bold text-white">TOTAL REFUND</h3>
                                <div class="text-3xl font-bold text-green-400">Rp ${data.refundAmount.toLocaleString('id-ID', {maximumFractionDigits: 2})}</div>
                            </div>
                        </div>
                    </div>
                </div>`;
        }

        function backToInput() {
            document.getElementById('result-section').classList.add('hidden');
            document.getElementById('main-section').classList.remove('hidden');
            const form = document.querySelector('#main-section form');
            if (form) {
                form.reset();
            }
            validateInputs();
        }

        function printDocument() {
            const documentContent = document.getElementById('refundResult').innerHTML;
            const printWindow = window.open('', '_blank');
            const currentDate = new Date().toLocaleString('id-ID');
            const styles = `
                <style>
                    :root { --very-peri: #5B5C9A; --dark-peri: #3E3F6A; --darker-peri: #2A2B4F; --darkest-peri: #1F2030; --accent: #7A6EB7; --light-peri: #898AC8; --text-light: #E8E8F5; --glass-border: rgba(255, 255, 255, 0.15); --accent-glass-bg: rgba(154, 155, 217, 0.15); }
                    @media print { body { -webkit-print-color-adjust: exact; print-color-adjust: exact; } }
                    body { font-family: 'Inter', sans-serif; background: #fff; color: #111; }
                    .bg-\\[var\\(--darker-peri\\)\\] { background-color: #f3f4f6 !important; }
                    .bg-gradient-to-r { background-image: linear-gradient(to right, var(--accent), var(--very-peri)) !important; }
                    .text-white, .font-bold, .font-semibold { color: #111 !important; }
                    .text-2xl { font-size: 1.5rem; } .text-lg { font-size: 1.125rem; } .text-sm { font-size: 0.875rem; }
                    .p-6 { padding: 1.5rem; } .space-y-6 > :not([hidden]) ~ :not([hidden]) { margin-top: 1.5rem; }
                    .grid { display: grid; } .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); } .gap-4 { gap: 1rem; }
                    .flex { display: flex; } .justify-between { justify-content: space-between; } .items-center { align-items: center; }
                    .rounded-2xl { border-radius: 1rem; } .rounded-xl { border-radius: 0.75rem; }
                    .border { border-width: 1px; } .border-\\[var\\(--glass-border\\)\\] { border-color: #e5e7eb !important; }
                    .opacity-70 { opacity: 0.7; }
                    .bg-\\[var\\(--accent-glass-bg\\)\\] { background-color: #f9fafb !important; }
                    .p-4 { padding: 1rem; } .mb-2 { margin-bottom: 0.5rem; }
                    .from-green-600\\/20 { background-color: rgba(22, 163, 74, 0.1) !important; }
                    .border-green-500\\/30 { border-color: rgba(34, 197, 94, 0.3) !important; }
                    .text-green-400 { color: #22c55e !important; }
                    .text-3xl { font-size: 1.875rem; }
                    .font-mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
                </style>
            `;

            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                    <head>
                        <title>Dokumen Refund</title>
                        <script src="https://cdn.tailwindcss.com"><\/script>
                        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
                        ${styles}
                    </head>
                    <body class="p-4">
                        <div class="max-w-4xl mx-auto">${documentContent}</div>
                        <div class="text-center mt-8 text-gray-500 text-sm">
                            <p>Dokumen ini dibuat secara otomatis oleh Refund Calculator</p>
                            <p>Tanggal cetak: ${currentDate}</p>
                        </div>
                    </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.focus();
            setTimeout(() => { printWindow.print(); printWindow.close(); }, 500);
            showToast('Mempersiapkan dokumen untuk dicetak...');
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            toastMessage.textContent = message;
            const bgColor = type === 'error' ? 'rgba(239, 68, 68, 0.7)' : 'rgba(34, 197, 94, 0.7)';
            toast.style.backgroundColor = bgColor;
            toast.style.transform = 'translateX(0)';
            setTimeout(() => { toast.style.transform = 'translateX(120%)'; }, 3000);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('id-ID', { day: '2-digit', month: '2-digit', year: 'numeric' });
        }
    </script>
</body>
</html>